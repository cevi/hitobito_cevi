-#  Copyright (c) 2013-2014, Pfadibewegung Schweiz. This file is part of
-#  hitobito_pbs and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito_pbs.

- title t('.title', year: @year)

= form_for(@group, url: group_member_counts_path(@group), method: :put) do |f|
  = hidden_field_tag(:year, @year)
  = save_form_buttons(f, nil, census_group_group_path(@group, year: @year))

  = render layout: 'member_counts/table_header',
           locals: { before_columns: %w(Jahrgang), id: 'member_counts_fields'} do

    - @member_counts.each do |count|
      = fields_for 'member_count[]', count, builder: StandardFormBuilder do |f|
        %tr
          %td= count.born_in
          %td= f.input_field :person_f, class: 'span1'
          %td= f.input_field :person_m, class: 'span1'

  #member_counts_fields_blueprint{style: 'display: none', data: { blueprint: member_counts_fields_blueprint } }
  = link_to 'Eintrag hinzufÃ¼gen', 'javascript:void(0);', class: 'add_nested_fields', data: { association: 'member_counts', 'blueprint-id' => 'member_counts_fields_blueprint' }

  = save_form_buttons(f, nil, census_group_group_path(@group, year: @year))
